#:import MeshLinePlot kivy_garden.graph.MeshLinePlot
#:import colors kivymd.color_definitions.colors
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:set colorch0 get_color_from_hex(colors['Gray']['300'])
#:set colorch1 get_color_from_hex(colors['Cyan']['A200'])
#:set colorch2 get_color_from_hex(colors['Orange']['A400'])
#:set colorch3 get_color_from_hex(colors['Purple']['A400'])
#:set colorch4 get_color_from_hex(colors['Teal']['A400'])
#:set colorch5 get_color_from_hex(colors['Blue']['A400'])
#:set colorch6 get_color_from_hex(colors['Yellow']['A200'])
#:set colorch7 get_color_from_hex(colors['Red']['A400'])

<ContentCustomSheet@BoxLayout>:
	orientation: 'horizontal'
	size_hint_y: None
	height: '100dp'
	
	MDGridLayout:
		cols:4
		MDCheckbox:
			color:colorch0
			check:True
		MDLabel:
			text: 'ch0'
			color: colorch0
		MDCheckbox:
			color:colorch1
		MDLabel:
			text: 'ch1'
			color: colorch1
		MDCheckbox:
			color:colorch2
		MDLabel:
			text: 'ch2'
			color: colorch2
		MDCheckbox:
			color:colorch3
		MDLabel:
			text: 'ch3'
			color: colorch3
		MDCheckbox:
			color:colorch4
		MDLabel:
			text: 'ch4'
			color: colorch4
		MDCheckbox:
			color:colorch5
		MDLabel:
			text: 'ch5'
			color: colorch5
		MDCheckbox:
			color:colorch6
		MDLabel:
			text: 'ch6'
			color: colorch6
		MDCheckbox:
			color:colorch7
		MDLabel:
			text: 'ch7'
			color: colorch7
			
			

MDNavigationLayout:
	ScreenManager:
		id: screen_manager

		MDScreen:
			name: 'measurescreen'
			id: measurescreen
			
			MDBoxLayout:
				orientation: 'vertical'

				MDToolbar:
					id: toolbarmeasure
					pos_hint: {'top':1}
					elevation: 10
					left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]
					right_action_items: [['cog', lambda x: app.bottomsheet()],['play', lambda x: app.start()],['stop', lambda x: app.stop()]]
				
				Graph:
					id: graphchs
					xlabel:'Time (s)'
                    ylabel:'Voltage (V)'
					ymin:0
					ymax:10
					xmax:60
                    padding:5
                    x_ticks_major:10
                    x_ticks_minor:10
                    y_ticks_major:1
                    y_ticks_minor:10
                    x_grid:True
                    y_grid:True
                    x_grid_label:True
                    y_grid_label:True
                    draw_border:True
                    on_touch_down: coord_label.text = 'x:%.2f y:%.2f' %((self.to_data(args[1].pos[0], args[1].pos[1]))[0],(self.to_data(args[1].pos[0], args[1].pos[1]))[1])
                    MDLabel:
						id: coord_label
						text: 'x: y:'
						pos:(graphchs.width - 150, graphchs.height - 90)
				

				

		MDScreen:
			name: 'regulatepsscreen'

			MDToolbar:
				id: toolbarregulateps
				pos_hint: {'top':1}
				elevation: 10
				left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]
				right_action_items: [['play', lambda x: app.callback()], ['stop', lambda x: app.callback()]]

			MDLabel:
				text: 'Regulate PS'
				halign: 'center'

		MDScreen:
			name: 'darkcurrentscreen'

			MDToolbar:
				id: toolbardarkcurrent
				pos_hint: {'top':1}
				elevation: 10
				left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]
				right_action_items: [['play', lambda x: app.callback()], ['stop', lambda x: app.callback()]]

			MDLabel:
				text: 'Dark Current'
				halign: 'center'

		MDScreen:
			name: 'settingsscreen'

			MDToolbar:
				id: toolbarsettings
				pos_hint: {'top':1}
				elevation: 10
				left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]

			MDLabel:
				text: 'Settings Screen'
				halign: 'center'

		MDScreen:
			name: 'analyzescreen'

			MDToolbar:
				id: toolbarmetadata
				pos_hint: {'top':1}
				elevation: 10
				left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]
				right_action_items: [['folder-search', lambda x: app.callback()]]

			MDLabel:
				text: 'Analyze'
				halign: 'center'



	MDNavigationDrawer:
		id: nav_drawer

		BoxLayout:
			orientation: 'vertical'
			spacing: '8dp'
			padding: '8dp'

			Image:
				source: 'images/g33.png'
				size_hint_y: None

			MDLabel:
				text: '  v.10.0'
				font_style: 'Caption'
				size_hint_y: None
				height: self.texture_size[1]

			ScrollView:

				MDList:
					OneLineIconListItem:
						text: 'Regulate Power'
						on_release:
							screen_manager.current = 'regulatepsscreen'
							nav_drawer.set_state('close')
						IconLeftWidget:
							icon: 'arrow-collapse-vertical'

					OneLineIconListItem:
						text: 'Dark Current'
						on_release:
							screen_manager.current = 'darkcurrentscreen'
							nav_drawer.set_state('close')
						IconLeftWidget:
							icon: 'chart-sankey'

					OneLineIconListItem:
						text: 'Measure'
						on_release:
							screen_manager.current = 'measurescreen'
							nav_drawer.set_state('close')
						IconLeftWidget:
							icon: 'chart-line'

					OneLineIconListItem:
						text: 'Settings'
						on_release:
							screen_manager.current = 'settingsscreen'
							nav_drawer.set_state('close')
						IconLeftWidget:
							icon: 'cog'

					OneLineIconListItem:
						text: 'Analyze'
						on_release:
							screen_manager.current = 'analyzescreen'
							nav_drawer.set_state('close')
						IconLeftWidget:
							icon: 'chart-bell-curve'

					OneLineIconListItem:
						text: 'Turn Off'
						on_release:
							quit()
						IconLeftWidget:
							icon: 'power'
